# Руководство по работе с Api


## Метод: /auth 
> Авторизует пользователя

+ POST запрос / 
+ Принимает параметры [login],[password]


## Метод: /register
> Регистрирует пользователя

+ POST запрос / 
+ Принимает параметры [login],[email], [password]


## Метод: /profile?key=<value>
> Выдает информацию о пользователе

+ GET запрос / 
+ Принимает параметры [key] (user_api key)


## Метод: /profile?key=<value>&username=<value>
> Информация профиля по юзернейму

+ GET запрос /
+ Принимает параметры [key], [username] (user_api key), (никнейм юзера)


## Метод: /search?key=<value>&username=
> Поиск по пользователям

+ GET запрос /
+ Принимает параметры [key], [username] (user_api key), (никнейм юзера)


## Метод: /last-reviews?key=<value>
> Поcледние 10 отзывов в сервисе

+ GET запрос /
+ Принимает параметры [key] (user_api key)


## Метод: /create-deal
> Создает сделку с пользователем

+ Post запрос /
+ Принимает параметры :
[uApi]       - Апи пользователя, отправившего запрос
[title]      - Название сделки
[role]       - Роль отправителя в сделке (customer / seller )
[amount]     - Цена 
[recipient]  - Никнейм получателя  


## Метод: /accept-deal
> Принимает сделку пользователя

+ Post запрос /
+ Принимает параметры :
  [uApi]       - Апи пользователя, отправившего запрос
  [dealId]     - Уникальный id сделки


## Метод: /decline-deal
> Отклоняет сделку пользователя

+ Post запрос /
+ Принимает параметры :
  [uApi]       - Апи пользователя, отправившего запрос
  [dealId]     - Уникальный id сделки


## Метод: /info-deal
> Выводит информацию об указанной сделке

+ Post запрос /
+ Принимает параметры :
  [uApi]       - Апи пользователя, отправившего запрос
  [dealId]     - Уникальный id сделки


## Метод: /chat-history
> Отображает все сообщения сделки

+ Post запрос /
+ Принимает параметры :
[uApi]       - Апи пользователя, отправившего запрос
[dealId]     - Уникальный id сделки


## Метод: /chat-message
> Отправляет сообщения в чат

+ Post запрос /
+ Принимает параметры :
[uApi]       - Апи пользователя, отправившего запрос
[dealId]     - Уникальный id сделки
[message]    - Сообщение 


## Метод: /chat-listen
> Проверяет новые сообщения

+ Post запрос /
+ Принимает параметры :
[uApi]       - Апи пользователя, отправившего запрос
[dealId]     - Уникальный id сделки
[messages-count]    - подсчет всех сообщений на стороне клиента 


## Метод: /set-deal-status
> Установка статуса сделки

+ POST запрос /
+ Принимает параметры :
[uApi]       - Апи пользователя, отправившего запрос
[dealId]     - Уникальный id сделки
[status]     - Статус сделки [accept / decline / report]


## Метод: /set-deal-review
> Установка статуса сделки

+ POST запрос /
+ Принимает параметры :
[uApi]       - Апи пользователя, отправившего запрос
[dealId]     - Уникальный id сделки
[grade]      - Оценка отзыва
[content]    - Сам контент отзыва


## Метод: /settings-change-mail
> Смена почты

+ POST запрос /
+ Принимает параметры :
[uApi]       - Апи пользователя, отправившего запрос
[old_mail]     - Старая почта
[new_mail]      - Новая почта
[password]    - Пароль


## Метод: /settings-change-password
> отправка письма со смееной пароля

+ POST запрос /
+ Принимает параметры :
[mail]     - Почта от аккаунта


## Метод: /set-new-password
> установить новый пароль

+ POST запрос /
+ Принимает параметры :
[token]       - токен, отправленный в письме
[password]     - новый пароль


## Метод: /profile-info
> информация о профиле (сделки/отзывы)

+ POST запрос /
+ Принимает параметры :
[uApi]       - апи токен
[username]     - юзернейм пользователя
[action]     - (deals / reviews)
[page]     - страница (если не указывается - 1)


## ----- Методы для админимтратора -----


## Метод: /admin-view-users
> просмотр списка пользователей

+ POST запрос /
+ Принимает параметры :
  [uApi]       - апи токен
  [page]     - страница (если не указывается - 1)


## Метод: /admin-view-reports
> просмотр списка репортов

+ POST запрос /
+ Принимает параметры :
  [uApi]       - апи токен
  [page]     - страница (если не указывается - 1)


## Метод: /admin-report-info
> просмотр индивидуального репорта

+ POST запрос /
+ Принимает параметры :
  [uApi]       - апи токен
  [dealId]     - id сделки
 

